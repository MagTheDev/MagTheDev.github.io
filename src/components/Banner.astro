---
---

<figure class="crt-container" role="img" aria-label="Developer and Sysadmin decorative ASCII banner">
    <div class="crt-effect" aria-hidden="true">
        <pre class="banner-ascii">
__/\\\\\\\\\\\\_____/\\\\\\\\\\\\\\\__/\\\________/\\\__/\\\\\\\\\\\\\\\__/\\\___________________/\\\\\_______/\\\\\\\\\\\\\____/\\\\\\\\\\\\\\\____/\\\\\\\\\_____        
 _\/\\\////////\\\__\/\\\///////////__\/\\\_______\/\\\_\/\\\///////////__\/\\\_________________/\\\///\\\____\/\\\/////////\\\_\/\\\///////////___/\\\///////\\\___       
  _\/\\\______\//\\\_\/\\\_____________\//\\\______/\\\__\/\\\_____________\/\\\_______________/\\\/__\///\\\__\/\\\_______\/\\\_\/\\\_____________\/\\\_____\/\\\___      
   _\/\\\_______\/\\\_\/\\\\\\\\\\\______\//\\\____/\\\___\/\\\\\\\\\\\_____\/\\\______________/\\\______\//\\\_\/\\\\\\\\\\\\\/__\/\\\\\\\\\\\_____\/\\\\\\\\\\\/____     
    _\/\\\_______\/\\\_\/\\\///////________\//\\\__/\\\____\/\\\///////______\/\\\_____________\/\\\_______\/\\\_\/\\\/////////____\/\\\///////______\/\\\//////\\\____    
     _\/\\\_______\/\\\_\/\\\________________\//\\\/\\\_____\/\\\_____________\/\\\_____________\//\\\______/\\\__\/\\\_____________\/\\\_____________\/\\\____\//\\\___   
      _\/\\\_______/\\\__\/\\\_________________\//\\\\\______\/\\\_____________\/\\\______________\///\\\__/\\\____\/\\\_____________\/\\\_____________\/\\\_____\//\\\__  
       _\/\\\\\\\\\\\\/___\/\\\\\\\\\\\\\\\______\//\\\_______\/\\\\\\\\\\\\\\\_\/\\\\\\\\\\\\\\\____\///\\\\\/_____\/\\\_____________\/\\\\\\\\\\\\\\\_\/\\\______\//\\\_ 
        _\////////////_____\///////////////________\///________\///////////////__\///////////////_______\/////_______\///______________\///////////////__\///________\///__
_____/\\\\\\\\\\\____/\\\________/\\\_____/\\\\\\\\\\\_______/\\\\\\\\\_____/\\\\\\\\\\\\_____/\\\\____________/\\\\__/\\\\\\\\\\\__/\\\\\_____/\\\_                       
 ___/\\\/////////\\\_\///\\\____/\\\/____/\\\/////////\\\___/\\\\\\\\\\\\\__\/\\\////////\\\__\/\\\\\\________/\\\\\\_\/////\\\///__\/\\\\\\___\/\\\_                      
  __\//\\\______\///____\///\\\/\\\/_____\//\\\______\///___/\\\/////////\\\_\/\\\______\//\\\_\/\\\//\\\____/\\\//\\\_____\/\\\_____\/\\\/\\\__\/\\\_                     
   ___\////\\\_____________\///\\\/________\////\\\_________\/\\\_______\/\\\_\/\\\_______\/\\\_\/\\\\///\\\/\\\/_\/\\\_____\/\\\_____\/\\\//\\\_\/\\\_                    
    ______\////\\\____________\/\\\____________\////\\\______\/\\\\\\\\\\\\\\\_\/\\\_______\/\\\_\/\\\__\///\\\/___\/\\\_____\/\\\_____\/\\\\//\\\\/\\\_                   
     _________\////\\\_________\/\\\_______________\////\\\___\/\\\/////////\\\_\/\\\_______\/\\\_\/\\\____\///_____\/\\\_____\/\\\_____\/\\\_\//\\\/\\\_                  
      __/\\\______\//\\\________\/\\\________/\\\______\//\\\__\/\\\_______\/\\\_\/\\\_______/\\\__\/\\\_____________\/\\\_____\/\\\_____\/\\\__\//\\\\\\_                 
       _\///\\\\\\\\\\\/_________\/\\\_______\///\\\\\\\\\\\/___\/\\\_______\/\\\_\/\\\\\\\\\\\\/___\/\\\_____________\/\\\__/\\\\\\\\\\\_\/\\\___\//\\\\\_                
        ___\///////////___________\///__________\///////////_____\///________\///__\////////////_____\///______________\///__\///////////__\///_____\/////__               
        </pre>
        <div class="scanlines"></div>
    </div>
</figure>

<style is:inline>
    .crt-container {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: visible;
        margin: 0;
    }

    .crt-effect {
        position: relative;
        animation: crt-flicker 0.15s infinite;
        display: flex;
        justify-content: center;
    }

    @keyframes crt-flicker {
        0% { opacity: 0.97; }
        5% { opacity: 0.95; }
        10% { opacity: 0.98; }
        15% { opacity: 0.94; }
        20% { opacity: 0.99; }
        25% { opacity: 0.93; }
        30% { opacity: 0.97; }
        35% { opacity: 0.95; }
        40% { opacity: 0.94; }
        45% { opacity: 0.98; }
        50% { opacity: 0.95; }
        55% { opacity: 0.99; }
        60% { opacity: 0.93; }
        65% { opacity: 0.96; }
        70% { opacity: 0.98; }
        75% { opacity: 0.94; }
        80% { opacity: 0.97; }
        85% { opacity: 0.95; }
        90% { opacity: 0.98; }
        95% { opacity: 0.93; }
        100% { opacity: 0.97; }
    }

    /* Scanlines overlay */
    .scanlines {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        pointer-events: none;
        background: repeating-linear-gradient(
            0deg,
            rgba(0, 0, 0, 0.18) 0px,
            rgba(0, 0, 0, 0.18) 1px,
            transparent 1px,
            transparent 2px
        );
        z-index: 10;
    }

    .banner-ascii {
        font-family: "Berkeley Mono", "Courier New", monospace;
        font-size: var(--font-size-small);
        color: transparent;
        white-space: pre;
        margin: 0.5rem;
        transition: color 0.3s ease-in-out;
        /* Phosphor RGB subpixel simulation applied to text */
        background: repeating-linear-gradient(
            90deg,
            rgba(255, 180, 180, 1) 0px,
            rgba(180, 255, 180, 1) 1px,
            rgba(180, 180, 255, 1) 2px,
            var(--color-text) 3px
        );
        -webkit-background-clip: text;
        background-clip: text;
        text-shadow: 
            0 0 3px var(--color-text),
            0 0 6px rgba(255, 255, 255, 0.15),
            0 0 10px rgba(255, 255, 255, 0.05);
        position: relative;
        z-index: 1;
    }

    @media (max-width: 1300px) {
        .banner-ascii {
            font-size: var(--font-size-xs);
        }
    }

    @media (max-width: 510px) {
        .banner-ascii {
            font-size: var(--font-size-xxs);
            margin-top: 2rem;
        }
    }

    .banner-ascii .underscore {
        color: var(--color-muted);
        transition: color 0.3s ease-in-out;
    }

    /* Reduce motion for accessibility */
    @media (prefers-reduced-motion: reduce) {
        .crt-effect {
            animation: none;
        }
    }
    .glitch-char {
        color: var(--color-primary);
    }
</style>

<script>
    const asciiArt = document.querySelector('.banner-ascii');
    if (asciiArt) {
        // Color underscores
        asciiArt.innerHTML = asciiArt.innerHTML.replace(/_/g, '<span class="underscore">_</span>');
        
        // Store original content for glitch effect
        const originalText = asciiArt.textContent;
        const glitchChars = '!@#$%^&*()_+-=[]{}|;:,.<>?/~`0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\\';
        
        // Track visibility and scroll state
        let isInView = true;
        let isScrolling = false;
        let scrollTimeout: ReturnType<typeof setTimeout> | null = null;
        let activeGlitchInterval: ReturnType<typeof setInterval> | null = null;
        
        // IntersectionObserver to track if banner is visible
        const observer = new IntersectionObserver((entries) => {
            isInView = entries[0].isIntersecting;
        }, { threshold: 0.8 });
        observer.observe(asciiArt);
        
        // Restore original text and clear any active glitch
        function stopGlitch() {
            if (activeGlitchInterval) {
                clearInterval(activeGlitchInterval);
                activeGlitchInterval = null;
                // Restore original
                asciiArt!.textContent = originalText;
                asciiArt!.innerHTML = asciiArt!.innerHTML.replace(/_/g, '<span class="underscore">_</span>');
            }
        }
        
        // Detect scrolling
        window.addEventListener('scroll', () => {
            isScrolling = true;
            stopGlitch(); // Stop any ongoing glitch animation immediately
            if (scrollTimeout) clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => {
                isScrolling = false;
            }, 150); // Consider scrolling stopped after 150ms of no scroll events
        }, { passive: true });
        
        function glitch() {
            const text = originalText.split('');
            const glitchLength = Math.floor(Math.random() * 30) + 15; // 15-45 chars
            const startPos = Math.floor(Math.random() * (text.length - glitchLength));
            
            // Replace a random segment with glitch characters
            for (let i = startPos; i < startPos + glitchLength && i < text.length; i++) {
                if (text[i] !== '\n' && text[i] !== ' ') {
                    text[i] = glitchChars[Math.floor(Math.random() * glitchChars.length)];
                }
            }
            
            // Apply glitched text and re-add underscore styling
            asciiArt!.textContent = text.join('');
            asciiArt!.innerHTML = asciiArt!.innerHTML.replace(/_/g, '<span class="underscore">_</span>');
            
            // Rapidly cycle through glitch frames
            const glitchDuration = Math.random() * 75 + 25; // 25-100ms per frame
            const glitchFrames = Math.floor(Math.random() * 14) + 7; // 7-20 frames
            
            let frame = 0;
            activeGlitchInterval = setInterval(() => {
                // Stop immediately if scrolling started
                if (isScrolling) {
                    stopGlitch();
                    return;
                }
                frame++;
                if (frame >= glitchFrames) {
                    clearInterval(activeGlitchInterval!);
                    activeGlitchInterval = null;
                    // Restore original
                    asciiArt!.textContent = originalText;
                    asciiArt!.innerHTML = asciiArt!.innerHTML.replace(/_/g, '<span class="underscore">_</span>');
                } else {
                    // Another glitch frame
                    const frameText = originalText.split('');
                    for (let i = startPos; i < startPos + glitchLength && i < frameText.length; i++) {
                        if (frameText[i] !== '\n' && frameText[i] !== ' ') {
                            frameText[i] = `<span class="glitch-char">${glitchChars[Math.floor(Math.random() * glitchChars.length)]}</span>`;
                        }
                    }
                    asciiArt!.innerHTML = frameText.join('');
                    asciiArt!.innerHTML = asciiArt!.innerHTML.replace(/_/g, '<span class="underscore">_</span>');
                }
            }, glitchDuration);
        }
        
        // Trigger glitch at random intervals (2-6 seconds)
        function scheduleGlitch() {
            const delay = Math.random() * 4000 + 2000;
            setTimeout(() => {
                // Only glitch if: not scrolling, in view, motion allowed, tab visible
                if (!isScrolling && 
                    isInView && 
                    !window.matchMedia('(prefers-reduced-motion: reduce)').matches &&
                    document.visibilityState === 'visible') {
                    glitch();
                }
                scheduleGlitch();
            }, delay);
        }
        
        scheduleGlitch();
    }
</script>